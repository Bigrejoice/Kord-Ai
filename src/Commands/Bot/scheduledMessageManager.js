const a0_0x4d6649=a0_0xc96a;function a0_0x2744(){const _0x1e0f40=['Database','Error\x20sending\x20scheduled\x20message:','1905295AbUHzk','configPath','cancelScheduledMessage','ensureConfigDirectory','6247293IhXafC','push','listScheduledMessages','schedule','string','3KbBqsA','random','error','forEach','1108648qDYXgp','cancel','Invalid\x20message\x20format','shift','16VWtRXv','3943656KGmQKq','Error\x20loading\x20scheduled\x20messages:','generateUniqueId','4238394mtLewq','2197152dTykaL','message','loadScheduledMessages','readFileSync','chatId','object','Invalid\x20message\x20configuration:\x20chatId\x20and\x20message\x20are\x20required','writeFileSync','existsSync','12pBLjGu','7338600khiCOo','parse','1978qUYrSU','repeat','sock','1220499sMBXUx','toString','scheduleMessage','Error\x20saving\x20scheduled\x20messages:','exports','scheduledMessages','setSock','active','map','5NuuWMK','utf8','mkdirSync','550LwEJHo','Invalid\x20WhatsApp\x20connection\x20provided','1390CgIwRk','1432718AEHUgF','60624ColGOR','saveScheduledMessages','scheduleJob','16jOdhBJ','join','5545474vxUOmO','Error\x20rescheduling\x20message:','sendMessage','10WIRFhW','dirname','type','scheduled_messages.json','substr'];a0_0x2744=function(){return _0x1e0f40;};return a0_0x2744();}function a0_0xc96a(_0x553a45,_0x479776){const _0x2744a8=a0_0x2744();return a0_0xc96a=function(_0xc96a42,_0x42bd87){_0xc96a42=_0xc96a42-0x18d;let _0x38ec80=_0x2744a8[_0xc96a42];return _0x38ec80;},a0_0xc96a(_0x553a45,_0x479776);}(function(_0x48f5f8,_0x4da6c4){const _0x2f4395=a0_0xc96a,_0x25a117=_0x48f5f8();while(!![]){try{const _0x1c8b17=parseInt(_0x2f4395(0x18e))/0x1*(parseInt(_0x2f4395(0x1c3))/0x2)+parseInt(_0x2f4395(0x1aa))/0x3*(-parseInt(_0x2f4395(0x1ae))/0x4)+parseInt(_0x2f4395(0x1cf))/0x5*(parseInt(_0x2f4395(0x1b6))/0x6)+-parseInt(_0x2f4395(0x1a1))/0x7*(parseInt(_0x2f4395(0x1b2))/0x8)+parseInt(_0x2f4395(0x192))/0x9*(-parseInt(_0x2f4395(0x190))/0xa)+parseInt(_0x2f4395(0x197))/0xb+parseInt(_0x2f4395(0x1c0))/0xc*(parseInt(_0x2f4395(0x1a5))/0xd);if(_0x1c8b17===_0x4da6c4)break;else _0x25a117['push'](_0x25a117['shift']());}catch(_0x3a6479){_0x25a117['push'](_0x25a117['shift']());}}}(a0_0x2744,0x74818));const a0_0x3700e7=a0_0x168d;function a0_0x168d(_0x30f432,_0x568f5e){const _0x9d9455=a0_0x18b2();return a0_0x168d=function(_0x395016,_0x126e3f){_0x395016=_0x395016-0x1e2;let _0x40e998=_0x9d9455[_0x395016];return _0x40e998;},a0_0x168d(_0x30f432,_0x568f5e);}(function(_0x24c7b8,_0x2e4568){const _0x5b13ca=a0_0xc96a,_0x58d9be=a0_0x168d,_0x3f714e=_0x24c7b8();while(!![]){try{const _0xbad2dd=parseInt(_0x58d9be(0x20d))/0x1+parseInt(_0x58d9be(0x20f))/0x2*(parseInt(_0x58d9be(0x205))/0x3)+-parseInt(_0x58d9be(0x1e3))/0x4+parseInt(_0x58d9be(0x206))/0x5+-parseInt(_0x58d9be(0x1f5))/0x6+-parseInt(_0x58d9be(0x1eb))/0x7*(parseInt(_0x58d9be(0x1e5))/0x8)+parseInt(_0x58d9be(0x20c))/0x9*(-parseInt(_0x58d9be(0x1e2))/0xa);if(_0xbad2dd===_0x2e4568)break;else _0x3f714e[_0x5b13ca(0x1a6)](_0x3f714e['shift']());}catch(_0x296146){_0x3f714e[_0x5b13ca(0x1a6)](_0x3f714e[_0x5b13ca(0x1b1)]());}}}(a0_0x18b2,0xd3d5c));function a0_0x18b2(){const _0x59f1ee=a0_0xc96a,_0x155b3c=[_0x59f1ee(0x193),_0x59f1ee(0x196),_0x59f1ee(0x199),'message',_0x59f1ee(0x1b3),_0x59f1ee(0x18f),_0x59f1ee(0x194),_0x59f1ee(0x1cb),'job',_0x59f1ee(0x1a2),_0x59f1ee(0x1b9),_0x59f1ee(0x1bf),'schedule','now',_0x59f1ee(0x1c8),_0x59f1ee(0x1bb),_0x59f1ee(0x1a9),_0x59f1ee(0x19d),_0x59f1ee(0x1bc),'path',_0x59f1ee(0x1c6),_0x59f1ee(0x1c1),'stringify',_0x59f1ee(0x1b4),_0x59f1ee(0x1ce),_0x59f1ee(0x198),_0x59f1ee(0x1ac),'8440830ZXGuhK','1546905fnoAan',_0x59f1ee(0x19b),'2amBrqC',_0x59f1ee(0x1d0),_0x59f1ee(0x1c4),_0x59f1ee(0x1ad),_0x59f1ee(0x19a),_0x59f1ee(0x1b7),_0x59f1ee(0x1a6),_0x59f1ee(0x195),_0x59f1ee(0x1a3),_0x59f1ee(0x1a0),_0x59f1ee(0x1a7),_0x59f1ee(0x19c),_0x59f1ee(0x19e),_0x59f1ee(0x191),_0x59f1ee(0x1c5),_0x59f1ee(0x1c9),_0x59f1ee(0x1ca),_0x59f1ee(0x1a4),_0x59f1ee(0x1b5)];return a0_0x18b2=function(){return _0x155b3c;},a0_0x18b2();}const schedule=require('node-schedule'),fs=require('fs'),path=require(a0_0x3700e7(0x204));class ScheduledMessageManager{constructor(_0x592767=null){const _0x34f1ad=a0_0xc96a,_0xda23d0=a0_0x3700e7;this[_0xda23d0(0x1fa)]=_0x592767||path[_0xda23d0(0x1f2)](__dirname,'..','..',_0x34f1ad(0x19f),_0xda23d0(0x202)),this[_0xda23d0(0x1f8)]=[],this[_0xda23d0(0x1ec)]=null,this[_0xda23d0(0x1fb)]();}[a0_0x4d6649(0x1cc)](_0x22bfbc){const _0x212891=a0_0x4d6649,_0x13d6cc=a0_0x3700e7;if(!_0x22bfbc)throw new Error(_0x13d6cc(0x1f6));return this[_0x212891(0x1c5)]=_0x22bfbc,this;}[a0_0x3700e7(0x1ef)](){const _0x39eaf3=a0_0x4d6649,_0x3d9738=a0_0x3700e7,_0x360e79=path[_0x3d9738(0x20e)](this[_0x3d9738(0x1fa)]);!fs[_0x3d9738(0x1fc)](_0x360e79)&&fs[_0x39eaf3(0x18d)](_0x360e79,{'recursive':!![]});}[a0_0x4d6649(0x1b9)](){const _0x8cc4e3=a0_0x4d6649,_0x38a0bd=a0_0x3700e7;try{this[_0x38a0bd(0x1ef)](),!fs[_0x38a0bd(0x1fc)](this[_0x38a0bd(0x1fa)])&&fs[_0x8cc4e3(0x1be)](this[_0x38a0bd(0x1fa)],JSON['stringify']([]));const _0x30c774=fs[_0x8cc4e3(0x1ba)](this[_0x38a0bd(0x1fa)],_0x38a0bd(0x210)),_0x1d94e8=JSON[_0x8cc4e3(0x1c2)](_0x30c774);this[_0x38a0bd(0x1f8)]=[],_0x1d94e8[_0x38a0bd(0x212)](_0x58bfdf=>{const _0x383c94=_0x38a0bd;try{this['scheduleMessage'](_0x58bfdf);}catch(_0x1b9182){console[_0x383c94(0x20b)](_0x383c94(0x20a),_0x1b9182);}});}catch(_0x35a274){console[_0x38a0bd(0x20b)](_0x38a0bd(0x208),_0x35a274),this[_0x38a0bd(0x1f8)]=[];}}[a0_0x4d6649(0x193)](){const _0x5a8c6c=a0_0x4d6649,_0x3c0c61=a0_0x3700e7;try{const _0x229ba7=this[_0x3c0c61(0x1f8)][_0x3c0c61(0x209)](_0x3cba37=>({'id':_0x3cba37['id'],'type':_0x3cba37[_0x3c0c61(0x1e9)],'chatId':_0x3cba37[_0x3c0c61(0x200)],'message':_0x3cba37[_0x5a8c6c(0x1b8)],'schedule':_0x3cba37[_0x3c0c61(0x1fd)],'repeat':_0x3cba37['repeat']}));fs[_0x5a8c6c(0x1be)](this[_0x3c0c61(0x1fa)],JSON[_0x3c0c61(0x207)](_0x229ba7,null,0x2));}catch(_0x569d9b){console[_0x5a8c6c(0x1ac)](_0x3c0c61(0x1ed),_0x569d9b);}}[a0_0x3700e7(0x1ff)](_0x5cc833){const _0x430102=a0_0x4d6649,_0x9c2435=a0_0x3700e7;if(!_0x5cc833[_0x9c2435(0x200)]||!_0x5cc833[_0x9c2435(0x1f4)])throw new Error(_0x430102(0x1bd));const _0x1c7486=this[_0x9c2435(0x1f0)](),_0x53cdec=_0x5cc833[_0x430102(0x1a8)]instanceof Date?_0x5cc833['schedule']:new Date(_0x5cc833[_0x430102(0x1a8)]),_0x3c8762=schedule[_0x9c2435(0x1f7)](_0x53cdec,async()=>{const _0x321b62=_0x430102,_0x399b81=_0x9c2435;try{if(!this[_0x399b81(0x1ec)])throw new Error('WhatsApp\x20connection\x20(sock)\x20is\x20not\x20set');let _0xcedab6;if(typeof _0x5cc833[_0x399b81(0x1f4)]===_0x399b81(0x201))_0xcedab6={'text':_0x5cc833[_0x399b81(0x1f4)]};else{if(typeof _0x5cc833[_0x399b81(0x1f4)]===_0x399b81(0x203))_0xcedab6=_0x5cc833[_0x399b81(0x1f4)];else throw new Error(_0x321b62(0x1b0));}await this[_0x399b81(0x1ec)][_0x399b81(0x1f3)](_0x5cc833[_0x321b62(0x1bb)],_0xcedab6),!_0x5cc833[_0x399b81(0x211)]&&this[_0x399b81(0x1e6)](_0x1c7486);}catch(_0x483af6){console[_0x399b81(0x20b)](_0x399b81(0x1e7),_0x483af6);}}),_0x193fa2={'id':_0x1c7486,..._0x5cc833,'job':_0x3c8762,'active':!![]};return this[_0x9c2435(0x1f8)][_0x9c2435(0x1e4)](_0x193fa2),this[_0x9c2435(0x1f1)](),_0x1c7486;}[a0_0x3700e7(0x1e6)](_0x2e1b87){const _0x4e1b0a=a0_0x4d6649,_0x5c4265=a0_0x3700e7,_0x3d4e60=this[_0x5c4265(0x1f8)]['findIndex'](_0x49a438=>_0x49a438['id']===_0x2e1b87);if(_0x3d4e60!==-0x1){const _0x571159=this[_0x5c4265(0x1f8)][_0x3d4e60][_0x5c4265(0x1f9)];_0x571159&&_0x571159[_0x4e1b0a(0x1af)](),this[_0x5c4265(0x1f8)]['splice'](_0x3d4e60,0x1),this[_0x4e1b0a(0x193)]();}}[a0_0x3700e7(0x1e8)](){const _0x4cd0ad=a0_0x4d6649,_0x1db015=a0_0x3700e7;return this[_0x1db015(0x1f8)][_0x4cd0ad(0x1ce)](_0x1f5457=>({'id':_0x1f5457['id'],'type':_0x1f5457['type'],'chatId':_0x1f5457[_0x1db015(0x200)],'schedule':_0x1f5457[_0x1db015(0x1fd)],'message':_0x1f5457[_0x1db015(0x1f4)],'active':_0x1f5457[_0x4cd0ad(0x1cd)]}));}[a0_0x3700e7(0x1f0)](){const _0x4d7dcc=a0_0x4d6649,_0x14eaa3=a0_0x3700e7;return Date[_0x14eaa3(0x1fe)]()[_0x4d7dcc(0x1c7)](0x24)+Math[_0x4d7dcc(0x1ab)]()[_0x4d7dcc(0x1c7)](0x24)[_0x14eaa3(0x1ea)](0x2);}}module[a0_0x3700e7(0x1ee)]=ScheduledMessageManager;